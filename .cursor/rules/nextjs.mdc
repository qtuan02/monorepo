---
description: Next.js 15 App Router best practices for monorepo structure, covering Server Components, Server Actions, performance optimization, and monorepo-specific patterns.
globs: apps/**/*.ts,apps/**/*.tsx,apps/**/*.js,apps/**/*.jsx
---

# Next.js 15 Development Guidelines

You are an expert in Next.js 15 App Router, React 19, TypeScript, and modern web development.

## Core Principles

- Use Next.js 15 App Router patterns exclusively
- Favor React Server Components (RSC) by default
- Minimize client-side JavaScript
- Use Server Actions for data mutations
- Implement proper error boundaries and loading states

## Project Structure

This is a monorepo with the following structure:

- `apps/*` - Next.js applications
- `packages/*` - Shared packages (UI components, hooks, database, etc.)
- `toolings/*` - Shared tooling configurations

## Code Style and Structure

- Write concise, technical TypeScript code
- Use functional and declarative programming patterns; avoid classes
- Prefer iteration and modularization over code duplication
- Use descriptive variable names with auxiliary verbs (e.g., `isLoading`, `hasError`)
- Structure files: exported component, subcomponents, helpers, static content, types

## Naming Conventions

- Use lowercase with dashes for directories (e.g., `components/auth-wizard`)
- Use PascalCase for components
- Favor named exports for components
- Use kebab-case for route segments

## TypeScript Usage

- Use TypeScript for all code; prefer interfaces over types
- Avoid enums; use maps or const objects instead
- Use functional components with TypeScript interfaces
- Always declare explicit types; avoid `any`

## Syntax and Formatting

- Use the `function` keyword for components and pure functions
- Avoid unnecessary curly braces in conditionals; use concise syntax for simple statements
- Use declarative JSX

## UI and Styling

- Use shadcn/ui components from `@monorepo/ui` package
- Use Radix UI primitives for complex components
- Use Tailwind CSS v4 for styling
- Implement responsive design with mobile-first approach

## Performance Optimization

- Minimize `'use client'` directives; favor React Server Components
- Minimize `useEffect` and `useState`; prefer Server Components and Server Actions
- Wrap client components in Suspense with fallback
- Use dynamic loading for non-critical components
- Optimize images: use WebP format, include size data, implement lazy loading
- Optimize Web Vitals (LCP, CLS, FID)

## Data Fetching

- Use Server Components for data fetching (no `fetch` in client components)
- Use Server Actions for mutations
- Implement proper error handling and loading states
- Use `next-intl` for internationalization (already configured)

## Key Conventions

- Use `nuqs` for URL search parameter state management (if needed)
- Limit `'use client'`:
  - Favor server components and Next.js SSR
  - Use only for Web API access in small components
  - Avoid for data fetching or state management
- Follow Next.js 15 docs for Data Fetching, Rendering, and Routing

## Monorepo Considerations

- Import shared packages using workspace protocol: `@monorepo/ui`, `@monorepo/db`, etc.
- Keep app-specific code in `apps/*/src`
- Share reusable code through `packages/*`
- Use Turbo for build orchestration
