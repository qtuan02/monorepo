# Story 3.2: Interactive Component Preview

**Status:** Done

---

## Story

**As a** user
**I want to** see a live interactive preview of the component
**So that** I can verify its visual appearance and behavior before using it

---

## Acceptance Criteria

1. **Auto-Generated Registry**: A `component-registry.ts` file is automatically generated via script, mapping component IDs to their lazy-loaded implementations.
2. **Live Rendering**: The `PreviewContainer` component renders the actual UI component instead of a placeholder.
3. **Dynamic Loading**: Components are loaded dynamically (lazy loaded) to prevent bloating the initial bundle size.
4. **Error Handling**: Graceful fallback if a component fails to load or render.
5. **Automation**: The registry updates automatically when new components are added to `packages/ui`.

---

## Tasks / Subtasks

- [x] Updated `generate-metadata.ts` to generate `registry.ts`
  - [x] Scan components directory
  - [x] Generate file with `React.lazy` imports
  - [x] Map component IDs (kebab-case) to Component exports (PascalCase)

- [x] Update `PreviewContainer`
  - [x] Import generated registry
  - [x] Resolve component by ID
  - [x] Render component inside Suspense/ErrorBoundary
  - [x] Pass default props if available (optional)

- [x] Testing
  - [x] Verify Button component renders in documentation
  - [x] Verify error state for non-existent components

---

## Technical Notes

**Registry File Example (`src/generated/registry.ts`):**

```typescript
import { lazy } from "react";

export const componentRegistry = {
  button: lazy(() =>
    import("@monorepo/ui/components/button").then((m) => ({
      default: m.Button,
    })),
  ),
  input: lazy(() =>
    import("@monorepo/ui/components/input").then((m) => ({ default: m.Input })),
  ),
  // ...
};
```

**Integration:**
The `PreviewContainer` will use the component `id` from metadata to look up the component in the registry.
