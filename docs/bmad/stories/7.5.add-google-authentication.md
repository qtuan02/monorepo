# Story 7.5: Add Google Authentication (Optional)

**Status:** Blocked - Requires Backend Infrastructure  
**Epic:** Epic 7 - UI/UX Enhancements & New Features  
**Related Documents:** [Epic 7](../epics/epic-7-ui-enhancements-new-features.md)  
**Created:** 2025-12-23

---

## Story

**As a** user  
**I want** to optionally log in with Google  
**So that** I can personalize my experience

---

## Acceptance Criteria

1. Google Sign-In button in header
2. Users can browse without logging in
3. Login persists across sessions
4. User avatar/name shown when logged in
5. Sign out functionality
6. No content blocked by login requirement

---

## Tasks / Subtasks

- [ ] Setup Authentication Infrastructure
  - [ ] Install and configure better-auth
  - [ ] Set up Google OAuth provider
  - [ ] Configure environment variables
  - [ ] Set up auth routes/API endpoints

- [ ] Implement UI Components
  - [ ] Create Google Sign-In button component
  - [ ] Add sign-in button to header
  - [ ] Create user profile dropdown (avatar, name, sign out)
  - [ ] Add sign-out functionality

- [ ] Session Management
  - [ ] Implement session persistence
  - [ ] Handle auth state across page reloads
  - [ ] Implement auth context/provider

- [ ] Testing
  - [ ] Test Google OAuth flow
  - [ ] Verify session persistence across page reloads
  - [ ] Test sign-out functionality
  - [ ] Verify browsing works without login
  - [ ] Test user avatar/name display

---

## Dev Notes

**⚠️ BLOCKER IDENTIFIED:**

- **better-auth requires backend server** (Express, Hono, etc.)
- Documents app is currently **pure frontend** (Vite + React Router)
- Need to add backend infrastructure before this story can be implemented
- **Estimated effort with backend:** 8-10 hours
- **Status:** Deferred until backend framework is added to Documents app

**Technical Stack (When Backend is Available):**

- Use **better-auth** (not Firebase) as specified in Epic
- Google OAuth 2.0 provider
- Session persistence via cookies/localStorage
- Backend: Express/Hono + Prisma/Drizzle ORM

**Key Requirements:**

- Authentication is **OPTIONAL** - all content accessible without login
- No features should be gated behind authentication
- Future-proofing for potential features like favorites, bookmarks, etc.

**Implementation Considerations:**

- Better-auth setup requires Google OAuth client ID and secret (✅ Already in .env)
- Will need Google Cloud Console setup for OAuth credentials
- Requires database setup (SQLite for dev, PostgreSQL for prod)
- Need API routes: `/api/auth/signin`, `/api/auth/callback`, `/api/auth/signout`
- Consider NextAuth.js as alternative if better-auth has issues

---

## Change Log

| Date       | Version | Description         | Author     |
| :--------- | :------ | :------------------ | :--------- |
| 2025-12-23 | 1.0     | Story created by PO | Sarah (PO) |
