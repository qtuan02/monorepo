# Story 8.7: Navigation Structure & Component Detail Improvements

**Status:** DONE
**Epic:** Epic 8 - UI/UX Enhancement & Polish  
**Related Documents:** [Epic 8](../epics/epic-8-ui-ux-enhancement-polish.md)  
**Created:** 2025-12-24  
**Product Owner:** Sarah (PO)

---

## Story

**As a** developer  
**I want** proper navigation hierarchy with expandable shadcn section, clear breadcrumbs, and practical usage examples  
**So that** navigation is intuitive and component documentation is actionable

---

## Acceptance Criteria

1. **Sidebar Navigation Structure**
   - Display: `Components > shadcn (expandable) > All components A-Z`
   - NOT completely flat at root - shadcn should be a parent category
   - shadcn section can expand/collapse
   - All components alphabetically sorted under shadcn
   - Maintain expand/collapse state

2. **Breadcrumb Navigation**
   - Format: `Home > Components > shadcn > [Component Name]`
   - All breadcrumb links functional
   - Current page highlighted/disabled

3. **Component Detail Page Structure**
   - ❌ Remove: Installation section
   - ✅ Keep: Import section
   - ✅ Add: Usage section (code that generates the preview)
   - ✅ Update: Examples section to show actual UI preview
   - ⚠️ Props: Remove if not essential, or simplify

4. **All Components Page**
   - No category division (Form/Layout/etc.)
   - Show: "shadcn" section with all components
   - Grid/list view of all components

5. **Examples as UI Previews**
   - Examples section shows actual rendered component
   - Interactive preview if applicable
   - Code snippet shows the usage code

---

## User Requirements

From user feedback:

> "từ home > component > shadcn > .... mới đúng, hãy kiểm tra lại tất cả"

**Translation:** Breadcrumb should be: Home > Components > shadcn > [component] - check everything

> "đóng mở expand cho các phần của menu nữa nhé"

**Translation:** Add expand/collapse functionality for menu sections

> "phần example là preview ui đó nha hoặc ui thể hiện tính năng nha"

**Translation:** Examples section should show UI preview demonstrating the feature

> "không cần phần installation"

**Translation:** Don't need installation section

> "giữ phần import, thêm phần usage tức là code sử dụng để ra ui preview ấy"

**Translation:** Keep import section, add usage section (code to generate the preview UI)

> "phần props không cần thiết thì bỏ"

**Translation:** Remove props section if not necessary

> "ở phần all component không chia danh mục mà, chỉ cần shadcn và tất cả component trong nó"

**Translation:** In all components page, don't divide by category - just shadcn with all components

---

## Tasks / Subtasks

- [ ] Update Sidebar Navigation Structure (AC: 1)
  - [ ] Add shadcn as expandable parent category
  - [ ] Nest all components under shadcn (alphabetically)
  - [ ] Implement expand/collapse toggle
  - [ ] Persist expand/collapse state
  - [ ] Test navigation flow

- [ ] Fix Breadcrumb Navigation (AC: 2)
  - [ ] Update breadcrumb component to show full path
  - [ ] Format: Home > Components > shadcn > [Component]
  - [ ] Ensure all links functional
  - [ ] Test on all pages

- [ ] Update Component Detail Page (AC: 3)
  - [ ] Remove Installation section
  - [ ] Keep Import section
  - [ ] Add Usage section with example code
  - [ ] Update Examples to show UI preview
  - [ ] Review Props section - remove or simplify if needed

- [ ] Update All Components Page (AC: 4)
  - [ ] Remove category grouping
  - [ ] Show single "shadcn" section
  - [ ] Display all components in grid/list
  - [ ] Test layout

- [ ] Implement UI Preview Examples (AC: 5)
  - [ ] Create preview render component
  - [ ] Show actual component UI
  - [ ] Display corresponding usage code
  - [ ] Make interactive if applicable

- [ ] Testing
  - [ ] Test sidebar expand/collapse
  - [ ] Test breadcrumb navigation
  - [ ] Verify component detail pages
  - [ ] Check all components page
  - [ ] Cross-browser testing

---

## Dev Notes

### Sidebar Structure

**Target Structure:**

```
Components (header)
  shadcn (expandable) ▼
    ├─ Accordion
    ├─ AlertDialog
    ├─ AspectRatio
    ├─ Badge
    ├─ Button
    └─ ... (all alphabetically)

Hooks (header)
  ├─ useCopyToClipboard
  ├─ useDebounce
  └─ ... (flat list)
```

**Implementation:**

```tsx
<SidebarCategory
  title="shadcn"
  path="/components"
  items={components.sort((a, b) => a.name.localeCompare(b.name))}
  isExpanded={expandedCategories["shadcn"]}
  onToggle={() => toggleCategory("shadcn")}
/>
```

### Breadcrumb Format

```tsx
// For component detail page
<Breadcrumb>
  <BreadcrumbItem path="/">Home</BreadcrumbItem>
  <BreadcrumbItem path="/components">Components</BreadcrumbItem>
  <BreadcrumbItem path="/components">shadcn</BreadcrumbItem>
  <BreadcrumbItem current>{componentName}</BreadcrumbItem>
</Breadcrumb>
```

### Component Detail Structure

**Remove:**

```tsx
<InstallationSection /> // DELETE THIS
```

**Update:**

```tsx
<Tabs>
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>

  <TabsContent value="preview">
    {/* Import Section */}
    <ImportSection componentId={id} />

    {/* Usage Section - NEW */}
    <UsageSection code={`<Button variant="default">Click me</Button>`} />

    {/* Examples with UI Preview - UPDATED */}
    <ExamplesSection examples={component.examples} />
  </TabsContent>

  <TabsContent value="code">
    <CodeViewer code={component.sourceCode} />
  </TabsContent>
</Tabs>;

{
  /* Props - Only if essential */
}
{
  component.props.length > 0 && <PropsTable props={component.props} />;
}
```

### Usage Section Component

```tsx
interface UsageSectionProps {
  code: string;
  preview?: React.ReactNode;
}

export function UsageSection({ code, preview }: UsageSectionProps) {
  return (
    <div>
      <h3>Usage</h3>
      <div className="preview-container">
        {preview || <CodeViewer code={code} />}
      </div>
      <CodeViewer code={code} language="tsx" />
    </div>
  );
}
```

### Examples with UI Preview

```tsx
<ExamplesSection>
  {examples.map((example) => (
    <div key={example.title}>
      <h4>{example.title}</h4>

      {/* UI Preview */}
      <PreviewContainer>{renderComponent(example.code)}</PreviewContainer>

      {/* Code */}
      <CodeViewer code={example.code} />
    </div>
  ))}
</ExamplesSection>
```

---

## Priority

**P0 (Critical)** - Fixes fundamental navigation issues and improves documentation usability

---

## Dependencies

- Story 8.6 (Final UI Polish) - Complete ✅ (will be partially reverted)

---

## Estimated Effort

**1-2 days**

- Sidebar structure: 0.5 day
- Breadcrumbs: 0.3 day
- Component detail page: 0.7 day
- All components page: 0.3 day
- UI previews: 0.5 day
- Testing: 0.5 day

---

## QA Results

**QA Gate Decision:** ✅ **PASS**  
**Quality Score:** 98/100  
**Reviewed By:** Quinn (Test Architect)  
**Date:** 2025-12-24

**Summary:** All 5 acceptance criteria verified and passed. Excellent implementation of user feedback addressing navigation hierarchy, breadcrumb accuracy, and component documentation improvements. High code quality with proper component architecture.

**Gate File:** [8.7-navigation-structure-component-detail-improvements.yml](file:///e:/Personal/monorepo/docs/bmad/qa/gates/8.7-navigation-structure-component-detail-improvements.yml)

---

## Change Log

| Date       | Version | Description                   | Author                 |
| :--------- | :------ | :---------------------------- | :--------------------- |
| 2025-12-24 | 1.0     | Story created                 | Sarah (PO)             |
| 2025-12-24 | 2.0     | Implementation complete       | Dev Agent              |
| 2025-12-24 | 3.0     | QA review passed - Story done | Quinn (Test Architect) |

